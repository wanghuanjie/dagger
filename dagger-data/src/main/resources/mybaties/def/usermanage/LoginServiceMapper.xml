<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ziyoujiayuan.data.sql.mybaties.mapper.def.usermanage.LoginServiceMapper">
  <resultMap id="BaseResultMap" type="com.ziyoujiayuan.data.sql.mybaties.entity.def.usermanage.PrivilegeSnap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 20 11:49:38 CST 2017.
    -->
    <id column="privilege_id" jdbcType="BIGINT" property="privilegeId" />
    <result column="privilege_dec" jdbcType="VARCHAR" property="privilegeDec" />
    <result column="privilege_name" jdbcType="VARCHAR" property="privilegeName" />
    <result column="privilege_type" jdbcType="INTEGER" property="privilegeType" />
    <result column="privilege_url" jdbcType="VARCHAR" property="privilegeUrl" />
    <result column="parent_id" jdbcType="BIGINT" property="parentId" />
  </resultMap>
  <select id="selectPrivilegeByUserId" parameterType="java.util.Map" resultMap="BaseResultMap">
        select p.privilege_id          as           privilege_id,
               p.privilege_dec         as           privilege_dec,
               p.privilege_name        as           privilege_name,
               p.privilege_type        as           privilege_type,
               p.privilege_url         as           privilege_url,
               p.parent_id             as           parent_id
          from t_role_privilege rp
     left join t_privilege_info p
            on rp.privilege_id = p.privilege_id
         where rp.role_id = #{roleId}
           and p.status = #{status}
      order by p.privilege_type asc , p.privilege_id asc
  </select>
</mapper>